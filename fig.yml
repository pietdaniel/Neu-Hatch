db:
  build: db
  volumes_from:
    - dbdata
  environment:
    - HATCH_DB_USER
    - HATCH_DB_PASSWORD
    - HATCH_DB_NAME

dbdata:
  image: "postgres:9.4"
  command: /bin/echo Data container for db

server:
  build: server
  #command: python runserver.py -h 0.0.0.0 -p 5000
  working_dir: /code
  volumes:
    - $PWD/server/:/code
  ports:
    - 5000:5000
  links:
    - db
  environment: # vars w/ only a key are resolved from host machine
    - DEBUG=True
    - HATCH_DB_USER
    - HATCH_DB_PASSWORD
    - HATCH_DB_NAME
    - CONSUMER_KEY
    - CONSUMER_SECRET
    - ACCESS_TOKEN=PLACEHOLDER
    - ACCESS_TOKEN_SECRET=PLACEHOLDER
    - APP_SECRET=PLACEHOLDER
